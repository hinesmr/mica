<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MICA</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.2">
  <meta name="description" content="MICA">
  <meta name="author" content="Michael R. Hines">

   <!--[if lt IE 9]>
   <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
   <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
   <![endif]-->
  <script src="BOOTSTRAP/js/jquery.js"></script>
  <script src="BOOTSTRAP/js/bootstrap.min.js"></script>
  <link href="BOOTSTRAP/css/bootstrap.min.css" rel="stylesheet">
  <link href="MSTRAP/mica.css" rel="stylesheet">

  <script src="MSTRAP/mica.js" charset="utf-8"></script>
  <script src="BOOTSTRAP/js/jquery.bootpag.min.js"></script>
  </head>
  <body id='cbody'>
  <nav class="main-nav" id="main-nav">
  <br/><br/>
  <div id='sidebarcontents'></div>
  </nav>
  <div class='page-wrap'>
  <div class='content'>
    <div style="display:none" id="ConnectContents">
        <form method="POST" action="BOOTDEST/connect" accept-charset="UTF-8">
        Username: <br/><input type="text" id="username" name="username" value='BOOTUSERHOLD' placeholder="Username" />
        <br/>Password: <br/><input type="password" id="password" name="password" placeholder="Password" />
        <label class="checkbox">
            <input type="checkbox" name="remember" BOOTREMEMBER/> Remember Me
        </label>
        <button type="submit" name="connect" class="btn-primary btn-block" value='1'>Sign in</button>
        </form>
    </div>
    <div class="navbar navbar-default navbar-fixed-top" role='navigation'>
        <div class="container-fluid">
              <div class='navbar-header'>
               <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-collapse">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
               </button>
               <a id='offnav' class='navbar-brand' BOOTCANVASTOGGLE href='#'>&nbsp;&nbsp;<i class='glyphicon glyphicon-arrow-right'></i>&nbsp;BOOTCLOUDNAME</a>
              </div><!--.navbar-header-->
              <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                    BOOTNAV
                    </ul>
                   <div class='navbar-right' style='display: inline'>
			   <div class='navbar-brand'>
				   <table><tr>
				   <td>
				   <i class='glyphicon glyphicon-upload'></i>
				   </td><td>
				   <span id='pushstat' class="badge pull-right">100.0</span>
				   </td><td>
				   <i class='glyphicon glyphicon-download'></i>
				   </td><td>
				   <span id='pullstat' class="badge pull-right">100.0</span>
				   </td><td>
				   <i class='glyphicon glyphicon-eye-open'></i>
				   </td><td>
				   <span id='viewstat' class="badge pull-right">BOOTVIEWS</span>
				   </td><td>
				   &nbsp;
				   </td><td>
				   <a><img src='MSTRAP/favicon.ico' width='20px'/></a>
				   </td>
				   </tr></table>
			   </div>
                   </div>
              </div><!--/.navbar-collapse -->
         </div><!--container -->
    </div><!--navbar navbar-fixed-top -->
    <div id='allcontent' class='container-fluid'>
            <div class="modal fade" id='aboutModal'>
                <div class='modal-dialog'>
                    <div class='modal-content'>
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 id="myLoginLabel">About this software:</h3>
                        </div>
                        
                        <div class="modal-body">
                            <div>
                            <h5>Authors:</h5>
                            <p/><br>Michael R. Hines, Ph.D.: <a href='http://michael.hinespot.com'>http://michael.hinespot.com</a>
                            I am not a linguist (not by a longshot) - I have a dayjob as a researcher in operating systems, virtualization and cloud computing. 

                            <p/><br/>
                            I entered China for work recently and began learning Chinese,
                            But I'm also a former musician, so the music of spoken language came 
                            very naturally to me - this was my saving grace. For years, I was so
                            embarrassed that I couldn't read/write characters - so I made up lots
                            of excuses to my friends and coworkers until finally I realized the 
                            source of the problem: My brain cannot physically deconstruct so much 
                            information (strokes) in such a small area of space. But I've found
                            that this is not relevant to conversation, as this software helps to 
                            prove later: Characters are the enemy. I wanted to be able to read
                            Chinese books and news stories like I would any other kind of prose,
                            so I created this software.

                            <p/><br/>
                            Hope you enjoy it as much as I do. =)

                            <p/><br/>
                            <h5>Credits:</h5>

                            <br>Lexical word parsing and character grouping: http://www.ictclas.org
                            <br>Offline chinese translation: https://pypi.python.org/pypi/cjklib
                            <br>Offline polyphome listings: https://github.com/lxyu/pinyin
                            <br>Online sentence-level translations: http://www.microsoft.com/en-us/translator/ (as long as it remains free)

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id='newAccountModal'>
                <div class='modal-dialog'>
                    <div class='modal-content'>
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 id="myLoginLabel">Create New Account:</h3>
                        </div>
                        
                        <div class="modal-body">
                            <div id='newaccountdestination'>
                                <form action='BOOTDEST/account' method='post' enctype='multipart/form-data'>
                                <h5>&nbsp;Username: <input type="text" name="username"/></h5>
                                <h5>&nbsp;Password: <input type="password" name="password"/></h5>
                                <h5>&nbsp;Confirm:&nbsp; <input type="password" name="confirm"/></h5>
                                BOOTNEWACCOUNTADMIN
                                <button name='newaccount' type="submit" class="btn-primary" value='password'>
                                <i class="icon-plus-sign icon-white"></i>&nbsp;Create</button>
                                </form>                                   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id='regroupModal'>
                <div class='modal-dialog'>
                    <div class='modal-content'>
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 id="myLoginLabel">Split/Merge Words:</h3>
                        </div>
                        
                        <div class="modal-body">
                            <div id='regroupdestination'></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id='instantModal'>
                <div class='modal-dialog'>
                    <div class='modal-content'>
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 id="myLoginLabel">Instant Translation:</h3>
                        </div>
                        
                        <div class="modal-body">
                            <div id='instantdestination'></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id='uploadModal'>
                <div class='modal-dialog'>
                    <div class='modal-content'>
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3 id="myUploadLabel">Upload Story:</h3>
                        </div>
                        
                        <div class="modal-body">
                                <h4><b>Copy/Paste a Story:</b></h4>
                                <form action='BOOTDEST/home#main-nav' method='post' enctype='multipart/form-data'>
                                <h5>
                                   &nbsp;<button name='uploadtext' type="submit" class="btn-primary" value='empty'>
                                  <i class="icon-upload icon-white"></i>&nbsp;Upload Text</button>
                                   &nbsp;Unique Name: <input type='text' name='storyname' value=''></input>
                                </h5>
                                <br/><textarea style='width: 90%' name="storytext" id="file"></textarea>
                                <h5>&nbsp;<input type="checkbox" name="removespaces" checked/>&nbsp;Remove Spaces?</h5>
                                </form>                                   
                                <p/>
                                <h4><b>Or Upload a File Instead:</b></h4>
                                <form action='BOOTDEST/home#main-nav' method='post' enctype='multipart/form-data'>
                                <h5>
                                    &nbsp;<button name='uploadfile' type="submit" class="btn-primary" value='empty'>
                                    <i class="icon-upload icon-white"></i>&nbsp;Upload File</button>
                                    &nbsp;Story File: <input type="file" name="storyfile" id="file"/> 
                                    <br/>
                                      What kind of file is this? <select name="filetype">
                                      <option value='pdf'>PDF (utf-8, multi-page)</option>
                                      <option value='txt'>TXT (utf-8, single-page)</option>
                                      <option disabled value='epub'>EPUB (not implemented, utf-8, multi-page)</option>
                                      <option disabled value='json'>JSON (not implemented, utf-8, multi-page</option>
                                      </select>
                                      <h5>&nbsp;<input type="checkbox" name="removespaces" checked/>&nbsp;Remove Spaces?</h5>
                                </h5>
                                </form>                                   
                                <h5>NOTE: Story *must* be UTF-8 encoded.</h5>
                        </div>
                    </div>
                </div>
            </div>
BOOTBODY
     </div> <!-- container -->
     <div id='footer'></div>
   </div>  <!--content -->
  </div>  <!--page-wrap -->
    <script>

    /* 
     * Only functions defined in the main HTML page
     * seem to be visible from Android. No idea why.
     */
    function pushstat(info) {
        $("#pushstat").html(info);
    }
    function pullstat(info) {
        $("#pullstat").html(info);
    }
    function viewstat(info) {
        $("#viewstat").html(info);
    }
    var ConnectisVisible = false;
    var ConnectclickedAway = false;
    function getTemplate() {
            if ($.browser.device == true)
                    return "<div style='margin-right: 150px' id='connectpopover' class='popover'><div class='arrow'></div><div class='popover-inner'><h3 class='popover-title'></h3><div class='popover-content'><p></p></div></div></div>";
            else
                    return "<div id='connectpopover' class='popover'><div class='arrow'></div><div class='popover-inner'><h3 class='popover-title'></h3><div class='popover-content'><p></p></div></div></div>";
    }
    var connectpop = $('#connectpop').popover({ 
        html : true,
        title: "Connect:",
//        placement : $.browser.device ? 'bottom-right' : 'bottom',
        placement : 'bottom',
        trigger: 'manual',
        template: getTemplate(),
        content: function() {
          return $('#ConnectContents').html();
        }
      });
      /* Allow the popover to close when clicking somewhere else on the screen */
    Connectdata = connectpop.data('popover');

    if(Connectdata != undefined) {
       ConnectclickedAway = true;
       ConnectisVisible = true;
       connectpop.data('popover').tip().css('z-index', 1030);
    }

      connectpop.click(function(e) {
            $(this).popover('toggle');
            ConnectclickedAway = false;
            ConnectisVisible = true;
            e.preventDefault();
        });

    $(document).click(function(e) {
          if(findParentNode('ConnectContents', e.srcElement, 'cbody') == true) {
            return;
          }
          if(findParentNode('connectpopover', e.srcElement, 'cbody') == true) {
            return;
            }

              if(ConnectisVisible & ConnectclickedAway)
              {
                $('#connectpop').popover('hide');
                ConnectisVisible = ConnectclickedAway = false;
              }
              else
              {
                ConnectclickedAway = true;
              }
    });
BOOTSHOWPOPOVER
    </script>
</body>
</html>
